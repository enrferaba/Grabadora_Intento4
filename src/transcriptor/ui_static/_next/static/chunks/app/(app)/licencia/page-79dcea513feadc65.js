(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[474],{3668:function(e,t,a){Promise.resolve().then(a.bind(a,953))},953:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return x}});var i=a(7437),n=a(932),c=a(1266);async function s(){let e=await fetch((0,c.f8)("/license/status"),{cache:"no-store"});if(!e.ok)throw Error("No se pudo obtener el estado de la licencia");return e.json()}var r=a(8030);/**
 * @license lucide-react v0.396.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,r.Z)("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),o=(0,r.Z)("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);function d(){var e,t;let{data:a,isLoading:c,refetch:r}=(0,n.a)({queryKey:["license"],queryFn:s});if(c)return(0,i.jsx)("div",{className:"rounded-xl border border-zinc-800 bg-zinc-900/60 p-6 text-sm text-zinc-400",children:"Comprobando licencia…"});if(!a)return(0,i.jsx)("div",{className:"rounded-xl border border-zinc-800 bg-zinc-900/60 p-6 text-sm text-zinc-400",children:"No se pudo cargar el estado de la licencia."});let d=a.active?l:o;return(0,i.jsxs)("div",{className:"space-y-4 rounded-xl border border-zinc-800 bg-zinc-900/60 p-6",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)(d,{className:"h-6 w-6 ".concat(a.active?"text-emerald-400":"text-red-400")}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"text-sm font-semibold text-white",children:["Plan ",a.plan]}),(0,i.jsx)("div",{className:"text-xs text-zinc-500",children:a.active?"Funciones Pro activas":null!==(e=a.reason)&&void 0!==e?e:"Licencia inactiva"})]})]}),(0,i.jsxs)("div",{className:"grid gap-2 text-xs text-zinc-400",children:[(0,i.jsxs)("div",{children:["Caducidad: ",null!==(t=a.expires_at)&&void 0!==t?t:"Sin fecha"]}),(0,i.jsxs)("div",{children:["En gracia: ",a.in_grace?"s\xed":"no"]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-xs uppercase text-zinc-500",children:"Features habilitadas"}),(0,i.jsx)("ul",{className:"mt-2 space-y-1 text-sm text-zinc-300",children:a.features.map(e=>(0,i.jsxs)("li",{children:["• ",e]},e))})]}),(0,i.jsx)("button",{type:"button",onClick:()=>r(),className:"rounded-lg border border-zinc-700 px-4 py-2 text-xs text-zinc-300 hover:border-brand-500 hover:text-white",children:"Volver a comprobar"})]})}function x(){return(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"text-2xl font-semibold text-white",children:"Licencia"}),(0,i.jsx)("p",{className:"text-sm text-zinc-500",children:"Gestiona el token firmado, libera dispositivos y revisa las features activas."})]}),(0,i.jsx)(d,{}),(0,i.jsxs)("div",{className:"rounded-xl border border-zinc-800 bg-zinc-900/40 p-6 text-xs text-zinc-400",children:[(0,i.jsx)("h2",{className:"text-sm font-semibold text-white",children:"\xbfC\xf3mo activar?"}),(0,i.jsxs)("ol",{className:"mt-2 list-decimal space-y-1 pl-4",children:[(0,i.jsxs)("li",{children:["Coloca el archivo ",(0,i.jsx)("code",{children:"licencia.json"})," junto al ejecutable o en la carpeta de datos."]}),(0,i.jsx)("li",{children:"Introduce la contrase\xf1a de activaci\xf3n la primera vez que abras la app."}),(0,i.jsx)("li",{children:"El backend validar\xe1 la firma RS256 offline y habilitar\xe1 las funciones Pro autorizadas."})]})]})]})}},1266:function(e,t,a){"use strict";var i,n;a.d(t,{Zn:function(){return l},f8:function(){return r}});let c=null===(i=a(357).env.NEXT_PUBLIC_API_URL)||void 0===i?void 0:i.trim(),s=c&&null!==(n=function(e){try{let t=new URL(e);return t.pathname="",t.search="",t.hash="",t.toString().replace(/\/$/,"")}catch(e){return null}}(c))&&void 0!==n?n:"";function r(e){let t=s||(window.location?window.location.origin.replace(/\/$/,""):""),a=e.startsWith("/")?e:"/".concat(e);return t?"".concat(t).concat(a):a}c&&!s&&console.warn("[solo-local] NEXT_PUBLIC_API_URL inv\xe1lida: ".concat(c));let l={"Content-Type":"application/json"}}},function(e){e.O(0,[336,954,971,23,744],function(){return e(e.s=3668)}),_N_E=e.O()}]);